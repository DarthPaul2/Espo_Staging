{
    "beforeSaveCustomScript": "/* Если создаём контакт и он привязан к фирме */\nifThen(\n    entity\\isNew() && !isEmpty(accountId),\n    ifThen(\n        isEmpty(record\\get('Account', accountId, 'cFirmenHauptkontaktId')),\n        record\\update('Account', accountId, {'cFirmenHauptkontaktId': id})\n    )\n);\n\n/* Если у контакта поменяли фирму */\nifThen(\n    entity\\isAttributeChanged('accountId') && !isEmpty(accountId),\n    ifThen(\n        isEmpty(record\\get('Account', accountId, 'cFirmenHauptkontaktId')),\n        record\\update('Account', accountId, {'cFirmenHauptkontaktId': id})\n    )\n);\n/* Если у фирмы ещё нет Hauptkontakt, а контакт сохраняется */\nifThen(\n    !isEmpty(accountId),\n    ifThen(\n        isEmpty(record\\get('Account', accountId, 'cFirmenHauptkontaktId')),\n        record\\update('Account', accountId, {'cFirmenHauptkontaktId': id})\n    )\n);\n\n"
}